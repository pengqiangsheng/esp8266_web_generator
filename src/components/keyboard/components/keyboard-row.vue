<template>
  <ul class="keyrow" :class="['rowsof-'+ 4]" >
    <li
      v-for="(item, index) in row"
      :class="('keysof-' + keycount)"
      :key="item.text+index"
    >
      <button
        tag="button"
        v-if="item.text !== 'del'"
        class="key r-border txt-key"
        :class="[ ('keycodeof-' + index), {'disabled': (!item.enabled)}]"
        :disabled="(!item.enabled)"
        @click="(e)=>{onButtonClick(e, item)}">{{ item.text}}
      </button>
      <button v-else :class="['key r-border txt-key', 'keycodeof-' + index, 'keycodeof-del', {'first-keyboard': keyboardIndex === 0  }]" @click="handleDelClick" />
    </li>
  </ul>
</template>

<script>
export default {
  name: 'keyRow',
  props: ["rowcount", "row", "isfunc", "keycount", "keyboardIndex"],
  methods: {
    onButtonClick(e, item) {
      if(item.enabled) {
        this.$emit("onKeyClick", item.text);
        this.$emit("onKeyEvent", e, item);
      }
    },
    handleDelClick() {
      this.$emit("onDelEvent");
      console.log('del')
    }
  }
}
    
</script>

<style scoped>
ul.keyrow {
  position: relative;
  display: flex;
  /* justify-content: center; */
  /* -webkit-box-pack: center; */
  /* -webkit-justify-content: center; */
  flex-direction: row;
  flex-wrap: nowrap;
  list-style: none;
  height: 100%;
}

/*上下之间每行间隔*/
ul.keyrow:not(:first-child) {
  margin-top: 8px;
}

ul.rowsof-5 {
    height: -webkit-calc((100% - 8px * 4)/5);
    height: calc((100% - 8px * 4)/5);
}

ul.rowsof-4 {
    height: -webkit-calc((100% - 8px * 3)/4);
    height: calc((100% - 8px * 3)/4);
}

/*需要设置button在所有父节点上的百分比*/
ul.keyrow > li {
    height: 100%;
}

/*按键左右间隔为5像素*/
ul.keyrow > li:not(:last-child) {
    margin-right: 5px;
}

/*动态计算每个按键的宽度, 按每行10个按键来计算*/
ul.keyrow > li.keysof-10 {
    -webkit-box-flex: 0.095;
    -webkit-flex: 0 1 -webkit-calc((100% - 5px * 9)/10);
    flex: 0 1 calc((100% - 5px * 9)/10);
}

/*在最后一行最后一个键,肯定存在"确定"键,这个按键的宽度为2倍*/
ul.funcrow > li.keysof-10:last-child {
    -webkit-flex: 0 1 -webkit-calc((100% - 5px * 9)/10 * 2 + 5px);
    flex: 0 1 calc((100% - 5px * 9)/10 * 2 + 5px);
}

/* 增加9键样式 */
/*动态计算每个按键的宽度, 按每行9个按键来计算*/
ul.keyrow > li.keysof-9 {
    -webkit-box-flex: 0.12;
    -webkit-flex: 0 1 -webkit-calc((100% - 5px * 8)/8);
    flex: 0 1 calc((100% - 5px * 8)/9);
}

/*在最后一行最后一个键,肯定存在"确定"键,这个按键的宽度为2倍*/
ul.funcrow > li.keysof-9:last-child {
    -webkit-flex: 0 1 -webkit-calc((100% - 5px * 8)/9 * 2 + 5px);
    flex: 0 1 calc((100% - 5px * 8)/9 * 2 + 5px);
}

/* 增加11键样式 */
/*动态计算每个按键的宽度, 按每行9个按键来计算*/
ul.keyrow > li.keysof-11 {
    -webkit-box-flex: 0.9;
    -webkit-flex: 0 1 -webkit-calc((100% - 5px * 10)/11);
    flex: 0 1 calc((100% - 5px * 10)/11);
}

/*在最后一行最后一个键,肯定存在"确定"键,这个按键的宽度为2倍*/
ul.funcrow > li.keysof-11:last-child {
    -webkit-flex: 0 1 -webkit-calc((100% - 5px * 10)/11 * 2 + 5px);
    flex: 0 1 calc((100% - 5px * 10)/11 * 2 + 5px);
}

/*确定按键的背景颜色*/
button.keycodeof-bg:not(:disabled) {
    background-color: #4e8af9;
    color: white;
}

/*删除按键，按键码为1*/
button.keycodeof-del {
  color: transparent;
  background-position: center;
	background-repeat: no-repeat;
	background-size: 4.5vw;
  background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NiIgaGVpZ2h0PSI0NiIgdmlld0JveD0iMCAwIDQ2IDQ2Ij48cGF0aCBmaWxsPSIjOTk5IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MiwzOUgxOGExLjk5LDEuOTksMCwwLDEtLjQ2Mi0wLjA1OSwzLjI2OCwzLjI2OCwwLDAsMS0yLjg4LS45MDZMMS45MTQsMjUuMjkxYTMuMjc3LDMuMjc3LDAsMCwxLDAtNC42MzRMMTQuNjU3LDcuOTE0YTMuMjY4LDMuMjY4LDAsMCwxLDMuMDA5LS44OEExLjk5MywxLjk5MywwLDAsMSwxOCw3SDQyYTQsNCwwLDAsMSw0LDRWMzVBNCw0LDAsMCwxLDQyLDM5Wk0zNy43LDE2Ljg0N0wzMS41MywyM2w2LjE0NSw2LjE0NWExLjA4NywxLjA4NywwLDEsMS0xLjUzNywxLjUzN0wyOS45OTEsMjQuNTRsLTYuMTI4LDYuMTE2YTEuMDg2LDEuMDg2LDAsMCwxLTEuNTM3LTEuNTM0TDI4LjQ1NSwyMywyMi4zLDE2Ljg1MWExLjA4NywxLjA4NywwLDAsMSwxLjUzNy0xLjUzN2w2LjE1NSw2LjE1NSw2LjE2OC02LjE1NkExLjA4NiwxLjA4NiwwLDEsMSwzNy43LDE2Ljg0N1oiLz48L3N2Zz4=");
}

.first-keyboard {
  position: absolute;
  right: 0;
  width: calc((100% - 5px * 9)/10);
}


</style>